!function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class s{constructor(e){this.state=e,this.pageToken=void 0}static extractClipData(e){return e.items.map(({id:e,snippet:t,statistics:n})=>{const{title:s,channelTitle:i,description:a,publishedAt:r}=t,{viewCount:c}=n,o=a.length>150?`${a.slice(0,150)}...`:a;return{titleClip:s.length>45?`${s.slice(0,45)}...`:s,channelName:i.length>25?`${i.slice(0,25)}...`:i,descript:o,publishedAt:r,viewCount:c,image:t.thumbnails.medium,id:e}})}async getData(){const{urlApi:e,keyApi:t,request:n}=this.state,i=`${e}search?key=${t}&type=video&part=snippet&maxResults=15&q=${n}${void 0===this.pageToken?"":`&pageToken=${this.pageToken}`}`,a=await fetch(i),r=await a.json(),c=r.items.map(e=>e.id.videoId).join(","),{nextPageToken:o}=r;this.pageToken=o;const l=`${e}videos?key=${t}&id=${c}&part=snippet,statistics`,d=await fetch(l),u=await d.json();return s.extractClipData(u)}}var i=(e,t,n=null)=>{const s=document.createElement(e);if(void 0!==t){t.split(" ").forEach(e=>s.classList.add(e))}if(null!==n){const e=document.createTextNode(n);s.append(e)}return s};n(1);var a=class{static render(e){const t=document.createElement("link");t.setAttribute("href","https://fonts.googleapis.com/css?family=PT+Sans:400,700"),t.setAttribute("rel","stylesheet");const n=document.createElement("meta");n.setAttribute("name","viewport"),n.setAttribute("content","width=device-width,initial-scale=1"),document.head.append(t,n);const s=i("div","page__wrapper"),a=i("section","search"),r=i("input","search__box");r.setAttribute("placeholder",e),r.setAttribute("type","text"),r.setAttribute("id","search-box");const c=i("label","search__label");c.setAttribute("for","search-box"),c.append(r),a.append(c);const o=i("section","clip"),l=i("ul","clip__list");o.append(l),s.append(a,o),document.body.append(s),document.body.classList.add("page")}static clearClips(){const e=document.querySelector(".clip__list");if(null!==e){document.querySelector(".clip").removeChild(e);const t=i("ul","clip__list");document.querySelector(".clip").append(t)}}static renderClips(e){e.forEach(({titleClip:e,descript:t,image:n,channelName:s,publishedAt:a,id:r,viewCount:c})=>{const o=i("li","clip__item"),l=i("div","clip__wrapper"),d=i("img","clip__image");d.setAttribute("src",n.url),d.setAttribute("alt",e),d.setAttribute("width",n.width);const u=i("a","clip__link",e);u.setAttribute("href",`https://www.youtube.com/watch?v=${r}`),u.setAttribute("target","_blank");const p=i("h2","clip__title");p.append(u);const g=i("div","clip__info"),h=i("p","clip__channel-title",s),m=i("time","clip__date",a.slice(0,10));m.setAttribute("datetime",a);const v=i("p","clip__view-count",c);g.append(h,m,v);const f=i("p","clip__description",t);l.append(d,p,g,f),o.append(l),document.querySelector(".clip__list").append(o)})}static renderError(){const e=i("section","error visually-hidden"),t=i("p","error__text","No results found");e.append(t),document.querySelector(".page__wrapper").append(e)}};n(6);var r=class{constructor(e){this.currentPage=e,this.prevPage=e-1,this.beforePrevPage=e-2,this.nextPage=e+1}async render(){const e=i("section","pagination"),t=i("div","pagination__list"),n=i("button","pagination__item before-prev-page visually-hidden"),s=i("span","pagination__page-number visually-hidden",this.beforePrevPage);n.append(s);const a=i("button","pagination__item prev-page visually-hidden"),r=i("span","pagination__page-number visually-hidden",this.prevPage);a.append(r);const c=i("button","pagination__item current-page",this.currentPage),o=i("button","pagination__item next-page"),l=i("span","pagination__page-number visually-hidden",this.nextPage);o.append(l),[n,a,c,o].forEach(e=>e.setAttribute("type","button")),t.append(n,a,c,o),e.append(t),document.querySelector(".page__wrapper").append(e)}static changePage(e){const t=document.querySelector(".before-prev-page>span"),n=document.querySelector(".prev-page>span"),s=document.querySelector(".current-page"),i=document.querySelector(".next-page>span"),a=[t,n,s,i],r=Number(s.textContent);a.forEach(s=>{const i=s;"increase"===e?(i.textContent=Number(i.textContent)+1,1===r?n.closest("button").classList.remove("visually-hidden"):2===r&&t.closest("button").classList.remove("visually-hidden")):"decrease"===e&&r>1&&(i.textContent=Number(i.textContent)-1,2===r?n.closest("button").classList.add("visually-hidden"):3===r&&t.closest("button").classList.add("visually-hidden"))})}};class c{constructor(){this.handlers={}}static getClipsPerPage(){const e=document.querySelector(".clip__wrapper");return Number(getComputedStyle(e).getPropertyValue("--clips-per-page"))}static getCountsClips(){return document.querySelector(".clip__list").childNodes.length}static getCurrentPage(){const e=document.querySelector(".current-page");return Number(e.textContent)}addHandler(e,t){this.handlers[e]=t}isLastPage(){const e=c.getClipsPerPage(),t=e*c.getCurrentPage();c.getCountsClips()-t<e&&this.handlers.getExtraClips()}async start(){const e=document.querySelector(".clip__list");let t,n,s,i,a=window.innerWidth||document.body.clientWidth,o=!1;new r(1).render();const l=()=>(c.getCurrentPage()-1)*c.getClipsPerPage()+1;e.addEventListener("mousedown",s=>{s.preventDefault(),o=!0,e.classList.add("active"),t=s.pageX-e.offsetLeft,({scrollLeft:n}=e)}),e.addEventListener("mouseleave",()=>{o&&(e.style.scrollBehavior="smooth",e.scrollLeft+=s),o=!1,e.classList.remove("active"),s=0}),e.addEventListener("mouseup",()=>{o=!1,e.style.scrollBehavior="smooth",e.classList.remove("active"),s>3?(e.scrollLeft=n-document.documentElement.clientWidth,r.changePage("decrease")):s<-3&&(e.scrollLeft=n+document.documentElement.clientWidth,r.changePage("increase"),this.isLastPage()),s=0,i=l()}),e.addEventListener("mousemove",i=>{if(e.style.scrollBehavior="",o){i.preventDefault();const a=i.pageX-e.offsetLeft;s=a-t,e.scrollLeft=n-s}}),e.addEventListener("touchstart",s=>{o=!0,e.classList.add("active"),t=s.changedTouches[0].pageX-e.offsetLeft,({scrollLeft:n}=e)}),e.addEventListener("touchmove",i=>{if(e.style.scrollBehavior="",o){const a=i.changedTouches[0].pageX-e.offsetLeft;s=a-t,e.scrollLeft=n-s}}),e.addEventListener("touchend",()=>{o=!1,e.style.scrollBehavior="smooth",e.classList.remove("active"),s>3?(e.scrollLeft=n-document.documentElement.clientWidth,r.changePage("decrease")):s<-3&&(e.scrollLeft=n+document.documentElement.clientWidth,r.changePage("increase"),this.isLastPage()),s=0,i=l()}),window.addEventListener("resize",()=>{const t=window.innerWidth||document.body.clientWidth,n=a-t;e.scrollLeft>0&&(e.scrollLeft-=n*(c.getCurrentPage()-1));const s=l();if(s+c.getClipsPerPage()-1<i){let t=Math.ceil(i/c.getClipsPerPage())-c.getCurrentPage();for(e.scrollLeft+=document.documentElement.clientWidth*t;t>0;)r.changePage("increase"),t-=1}else if(s>i){const t=Math.ceil(i/c.getClipsPerPage());let n=c.getCurrentPage()-t;for(e.scrollLeft-=document.documentElement.clientWidth*n;n>0;)r.changePage("decrease"),n-=1}i=l(),a=t});const d=document.querySelector(".before-prev-page"),u=document.querySelector(".prev-page"),p=document.querySelector(".next-page"),g=document.querySelector(".pagination__list");g.addEventListener("click",t=>{const{target:n}=t;e.style.scrollBehavior="smooth",n===p?(e.scrollLeft+=document.documentElement.clientWidth,r.changePage("increase"),this.isLastPage()):n===u?(e.scrollLeft-=document.documentElement.clientWidth,r.changePage("decrease")):n===d&&(e.scrollLeft-=2*document.documentElement.clientWidth,r.changePage("decrease"),r.changePage("decrease")),i=l()}),g.addEventListener("mousedown",e=>{const{target:t}=e;t!==d&&t!==u&&t!==p||(t.firstChild.classList.remove("visually-hidden"),t.addEventListener("mouseleave",()=>{t.firstChild.classList.add("visually-hidden")}))}),g.addEventListener("mouseup",e=>{const{target:t}=e;t!==d&&t!==u&&t!==p||t.firstChild.classList.add("visually-hidden")})}static clear(){const e=document.querySelector(".page__wrapper"),t=document.querySelector(".pagination");null!==t&&e.removeChild(t)}}(new class{constructor(){this.state={urlApi:"https://www.googleapis.com/youtube/v3/",keyApi:"AIzaSyCTWC75i70moJLzyNh3tt4jzCljZcRkU8Y",request:""}}async start(){let e=null;a.render("What do you want to find?"),a.renderError();const t=new s(this.state),n=new c;document.getElementById("search-box").addEventListener("input",s=>{null!==e&&clearTimeout(e),e=setTimeout(async()=>{e=null;const i=s.target.value.trim();if(0!==i.length){a.clearClips(),c.clear(),document.querySelector(".error").classList.add("visually-hidden"),this.state.request=i;const e=await t.getData();0===e.length?document.querySelector(".error").classList.remove("visually-hidden"):(a.renderClips(e),n.addHandler("getExtraClips",async()=>{const e=await t.getData();a.renderClips(e)}),n.start())}},1e3)})}}).start()},function(e,t){},,,,,function(e,t){}]);
//# sourceMappingURL=app.bundle.js.map